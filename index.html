<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>à¸­à¸­à¸¢à¸¥à¸µà¹ˆà¸Šà¸²à¸šà¸¹à¹ˆ - Oilly Shabu</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: Arial, sans-serif;
}
body {
  background: #f6f6f6;
  padding: 15px;
  padding-bottom: 100px;
}
.lang-switch {
  text-align: right;
  margin-bottom: 10px;
}
.lang-btn {
  padding: 6px 10px;
  background: #ff6c00;
  color: #fff;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  cursor: pointer;
}
.top {
  padding: 10px 0;
  font-size: 16px;
  font-weight: bold;
}
.tabs {
  display: flex;
  gap: 10px;
  margin: 10px 0;
}
.tab {
  flex: 1;
  padding: 10px;
  background: #fff;
  border-radius: 8px;
  text-align: center;
  cursor: pointer;
}
.tab.active {
  background: #ff6c00;
  color: #fff;
}
.soup {
  background: #fff;
  padding: 12px;
  border-radius: 8px;
  margin: 10px 0;
}
.soup-title {
  font-weight: bold;
  margin-bottom: 8px;
}
.soup-options {
  display: flex;
  gap: 10px;
}
.soup-btn {
  flex: 1;
  padding: 8px;
  background: #eee;
  border-radius: 6px;
  text-align: center;
  cursor: pointer;
}
.soup-btn.active {
  background: #ff6c00;
  color: #fff;
}
.item {
  background: #fff;
  padding: 12px;
  border-radius: 8px;
  margin-bottom: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.name {
  width: 50%;
}
.price {
  color: #f30;
  font-weight: bold;
}
.nums {
  display: flex;
  align-items: center;
  gap: 8px;
}
.btn {
  padding: 4px 10px;
  background: #ff6c00;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}
.cart {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  background: #fff;
  padding: 15px;
  justify-content: space-between;
  align-items: center;
  display: flex;
}
.total {
  font-size: 18px;
  font-weight: bold;
  color: #f30;
}
.submit {
  background: #ff6c00;
  color: #fff;
  padding: 10px 15px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

.pay-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 999;
}
.pay-box {
  background: #fff;
  width: 90%;
  max-width: 400px;
  padding: 20px;
  border-radius: 12px;
  text-align: center;
}
.pay-title {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 10px;
}
.pay-desc {
  margin: 10px 0;
}
.pay-btn {
  background: #ff6c00;
  color: #fff;
  padding: 10px;
  margin-top: 15px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  width: 100%;
  margin-bottom: 8px;
}
.close {
  color: #999;
  margin-top: 10px;
  cursor: pointer;
}
.qr-code {
  width: 200px;
  height: 200px;
  margin: 15px auto;
  background: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
}
.qr-code img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.success-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}
.success-box {
  background: #fff;
  width: 85%;
  max-width: 380px;
  padding: 30px 20px;
  border-radius: 16px;
  text-align: center;
}
.success-title {
  font-size: 20px;
  font-weight: bold;
  color: #090;
  margin-bottom: 20px;
}
.order-no-text {
  font-size: 24px;
  font-weight: bold;
  color: #ff6c00;
  padding: 12px;
  border: 2px dashed #ff6c00;
  border-radius: 8px;
  margin: 10px 0;
}
.success-tip {
  font-size: 15px;
  color: #333;
  margin: 15px 0;
}
.success-close {
  background: #ff6c00;
  color: #fff;
  padding: 10px 25px;
  border: none;
  border-radius: 8px;
  margin-top: 10px;
  cursor: pointer;
}

.pwd-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 999999;
}
.pwd-box {
  background: #fff;
  width: 90%;
  max-width: 350px;
  padding: 25px;
  border-radius: 12px;
  text-align: center;
}
.pwd-title {
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 15px;
}
.pwd-input {
  width: 100%;
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 6px;
  margin-bottom: 15px;
  font-size: 16px;
}
.pwd-submit {
  background: #ff6c00;
  color: #fff;
  padding: 10px;
  border: none;
  border-radius: 8px;
  width: 100%;
  cursor: pointer;
}
.pwd-close {
  color: #999;
  margin-top: 10px;
  cursor: pointer;
}

.admin-layer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #fff;
  z-index: 99999;
  padding: 20px;
  display: none;
  overflow-y: auto;
}
.admin-title {
  font-size: 20px;
  font-weight: bold;
  margin-bottom: 15px;
  color: #ff6c00;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.badge {
  background: red;
  color: white;
  font-size: 14px;
  padding: 4px 8px;
  border-radius: 10px;
}
.order-info {
  background: #f6f6f6;
  padding: 12px;
  border-radius: 8px;
  margin-bottom: 10px;
}
.order-info p {
  margin: 5px 0;
}
.order-list {
  margin: 10px 0;
}
.order-item {
  padding: 8px;
  border-bottom: 1px solid #eee;
}
.history-title {
  font-size: 16px;
  font-weight: bold;
  margin: 15px 0 10px;
  color: #333;
}
.history-item {
  background: #f9f6f9;
  padding: 10px;
  border-radius: 6px;
  margin-bottom: 8px;
}
.history-item p {
  margin: 3px 0;
  font-size: 14px;
}
.today-stats {
  background: #fff3e0;
  padding: 12px;
  border-radius: 8px;
  margin: 15px 0;
}
.today-stats p {
  margin: 5px 0;
  font-weight: bold;
}
.pay-btn {
  padding: 6px 12px;
  border: none;
  border-radius: 6px;
  color: #fff;
  font-size: 14px;
  margin-top: 6px;
  cursor: pointer;
}
.pay-unpaid {
  background: #ff6c00;
}
.pay-paid {
  background: #1677ff;
}
.refresh-btn {
  background: #1677ff;
  color: #fff;
  padding: 10px;
  border: none;
  border-radius: 8px;
  width: 100%;
  margin-bottom: 10px;
  cursor: pointer;
  font-size: 16px;
}
.admin-close {
  background: #666;
  color: #fff;
  padding: 10px;
  border: none;
  border-radius: 8px;
  width: 100%;
  margin-top: 10px;
  cursor: pointer;
}

[data-lang="th"] {
  display: none;
}
.th [data-lang="zh"] {
  display: none;
}
.th [data-lang="th"] {
  display: inline;
}
</style>
</head>
<body>

<div class="lang-switch">
  <button class="lang-btn" onclick="switchLang()">ä¸­æ–‡ / à¹„à¸—à¸¢</button>
  <button class="lang-btn" onclick="openPwd()" style="background:#2266ee;margin-left:5px;">å•†å®¶åå°</button>
</div>

<div class="top">
  <span data-lang="zh">è®¢å•å·ï¼š</span>
  <span data-lang="th">à¸£à¸«à¸±à¸ªà¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­ï¼š</span>
  <span id="orderNo">OD123456</span>
  <br>
  <span data-lang="zh">åœ°å€ï¼š</span>
  <span data-lang="th">à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆï¼š</span>
  <input type="text" id="customerAddress" placeholder="é—¨ç‰Œå· / à¸«à¹‰à¸­à¸‡à¹€à¸¥à¸‚à¸—à¸µà¹ˆ" style="margin-top: 5px; padding: 5px; width: 200px;">
</div>

<div class="tabs">
  <div class="tab active" onclick="setType('å…³ä¸œç…®')">
    <span data-lang="zh">å…³ä¸œç…®</span>
    <span data-lang="th">à¸Šà¸²à¸šà¸¹</span>
  </div>
  <div class="tab" onclick="setType('è”¬èœ')">
    <span data-lang="zh">è”¬èœ</span>
    <span data-lang="th">à¸œà¸±à¸</span>
  </div>
  <div class="tab" onclick="setType('é¥®å“')">
    <span data-lang="zh">é¥®å“</span>
    <span data-lang="th">à¹€à¸„à¸£à¸·à¹ˆà¸­à¸‡à¸”à¸·à¹ˆà¸¡</span>
  </div>
</div>

<div class="soup">
  <div class="soup-title">
    <span data-lang="zh">é€‰æ‹©æ±¤åº•ï¼ˆå¿…é€‰ï¼‰</span>
    <span data-lang="th">à¹€à¸¥à¸·à¸­à¸à¸‹à¸¸à¸› (à¸ˆà¸³à¹€à¸›à¹‡à¸™)</span>
  </div>
  <div class="soup-options">
    <div class="soup-btn" id="s0" onclick="setSoup(0)">
      <span data-lang="zh">æ¸…æ±¤</span><span data-lang="th">à¸‹à¸¸à¸›à¹ƒà¸ª</span>
    </div>
    <div class="soup-btn" id="s1" onclick="setSoup(1)">
      <span data-lang="zh">ç”œå’¸é…±æ²¹</span><span data-lang="th">à¸‹à¸¸à¸›à¹‚à¸Šà¸¢à¸¸</span>
    </div>
    <div class="soup-btn" id="s2" onclick="setSoup(2)">
      <span data-lang="zh">éº»è¾£</span><span data-lang="th">à¸¡à¸±à¸ªà¸¥à¸²</span>
    </div>
  </div>
</div>

<div id="list"></div>

<div class="cart">
  <div>
    <span data-lang="zh">æ€»è®¡ï¼š</span><span data-lang="th">à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”ï¼š</span>
    <span class="total" id="total">0</span>
    <span data-lang="zh">æ³°é“¢</span><span data-lang="th">à¸šà¸²à¸—</span>
  </div>
  <button class="submit" onclick="toPay()">
    <span data-lang="zh">å»ä»˜æ¬¾</span><span data-lang="th">à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™</span>
  </button>
</div>

<div class="pay-layer" id="payLayer">
  <div class="pay-box">
    <div class="pay-title">
      <span data-lang="zh">ç¡®è®¤ä»˜æ¬¾</span>
      <span data-lang="th">à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™</span>
    </div>
    <div class="pay-desc">
      <span data-lang="zh">é‡‘é¢ï¼š</span><span data-lang="th">à¸ˆà¸³à¸™à¸§à¸™ï¼š</span>
      <span id="payMoney">0</span>
      <span data-lang="zh">æ³°é“¢</span><span data-lang="th">à¸šà¸²à¸—</span>
    </div>
    <div class="pay-desc">
      <span data-lang="zh">æ‰«ç æ”¯ä»˜</span>
      <span data-lang="th">à¸Šà¸³à¸£à¸°à¸œà¹ˆà¸²à¸™ PromptPay</span>
    </div>
    <div class="qr-code">
      <img id="qrImg" src="https://promptpay.io/0923969867.png" alt="PromptPay">
    </div>
    <button class="pay-btn" onclick="downloadQR()">
      <span data-lang="zh">ä¸‹è½½äºŒç»´ç å»æ”¯ä»˜</span>
      <span data-lang="th">à¸”à¸²à¸§à¸™à¹Œà¹‚à¸«à¸¥à¸” QR Code à¹€à¸à¸·à¹ˆà¸­à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™</span>
    </button>
    <button class="pay-btn" onclick="confirmOrder()">
      <span data-lang="zh">å·²å®Œæˆæ”¯ä»˜</span>
      <span data-lang="th">à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™à¹€à¸ªà¸£à¹‡à¸ˆà¸ªà¸´à¹‰à¸™</span>
    </button>
    <div class="close" onclick="closePay()">
      <span data-lang="zh">å…³é—­</span><span data-lang="th">à¸›à¸´à¸”</span>
    </div>
  </div>
</div>

<div class="success-layer" id="successLayer">
  <div class="success-box">
    <div class="success-title">
      <span data-lang="zh">ä¸‹å•æˆåŠŸ</span>
      <span data-lang="th">à¸ªà¸±à¹ˆà¸‡à¸­à¸²à¸«à¸²à¸£à¸ªà¸³à¹€à¸£à¹‡à¸ˆ</span>
    </div>
    <div class="order-no-text" id="showOrderNo">OD123456</div>
    <div class="success-tip">
      <span data-lang="zh">è¯·å®¢æˆ·æˆªå›¾ä¿å­˜å–é¤ç </span>
      <span data-lang="th">à¸à¸£à¸¸à¸“à¸²à¸–à¹ˆà¸²à¸¢à¸ à¸²à¸à¸£à¸«à¸±à¸ªà¸à¸²à¸£à¸ªà¸±à¹ˆà¸‡à¸‹à¸·à¹‰à¸­à¹€à¸à¸·à¹ˆà¸­à¸£à¸±à¸šà¸­à¸²à¸«à¸²à¸£</span>
    </div>
    <button class="success-close" onclick="closeSuccess()">
      <span data-lang="zh">ç¡®å®š</span><span data-lang="th">à¸•à¸à¸¥à¸‡</span>
    </button>
  </div>
</div>

<div class="pwd-layer" id="pwdLayer">
  <div class="pwd-box">
    <div class="pwd-title">å•†å®¶åå°</div>
    <input type="password" class="pwd-input" id="pwdInput" placeholder="è¯·è¾“å…¥å¯†ç ">
    <button class="pwd-submit" onclick="checkPwd()">ç¡®è®¤</button>
    <div class="pwd-close" onclick="closePwd()">å–æ¶ˆ</div>
  </div>
</div>

<div class="admin-layer" id="adminLayer">
  <div class="admin-title">
    à¸­à¸­à¸¢à¸¥à¸µà¹ˆà¸Šà¸²à¸šà¸¹à¹ˆ - å•†å®¶åå°
    <span id="newMsgBadge" class="badge" style="display:none;">æ–°è®¢å•</span>
  </div>

  <button class="refresh-btn" onclick="loadOrders()">ğŸ”„ åˆ·æ–°è®¢å•</button>

  <div class="today-stats">
    <p>ä»Šæ—¥è®¢å•ï¼š<span id="todayOrderCount">0</span> å•</p>
    <p>ä»Šæ—¥è¥æ”¶ï¼š<span id="todayTotal">0</span> à¸šà¸²à¸—</p>
  </div>

  <div class="history-title">å…¨éƒ¨è®¢å•</div>
  <div id="historyList"></div>

  <button class="admin-close" onclick="closeAdmin()">è¿”å›ç‚¹é¤</button>
</div>

<script>
const API = "https://api.jsonbin.io/v3/b/67e35c4aad19ca34f860a222";
const API_KEY = "$2a$10$ZJZJZJZJZJZJZJZJZJZJZu";

const foods = [
  { type:"å…³ä¸œç…®", name:"èåœ", nameth:"à¸«à¸±à¸§à¹„à¸Šà¹€à¸—à¹‰à¸²", price:10 },
  { type:"å…³ä¸œç…®", name:"é¸¡è›‹", nameth:"à¹„à¸‚à¹ˆ", price:10 },
  { type:"å…³ä¸œç…®", name:"æµ·å¸¦ç»“", nameth:"à¸ªà¸²à¸«à¸£à¹ˆà¸²à¸¢", price:10 },
  { type:"å…³ä¸œç…®", name:"é±¼è±†è…", nameth:"à¹€à¸•à¹‰à¸²à¸«à¸¹à¹‰à¸›à¸¥à¸²", price:10 },
  { type:"å…³ä¸œç…®", name:"é±¼ä¸¸", nameth:"à¸¥à¸¹à¸à¸Šà¸´à¹‰à¸™à¸›à¸¥à¸²", price:10 },
  { type:"å…³ä¸œç…®", name:"ç‰›è‚‰ä¸¸", nameth:"à¸¥à¸¹à¸à¸Šà¸´à¹‰à¸™à¹€à¸™à¸·à¹‰à¸­à¸§à¸±à¸§", price:10 },
  { type:"å…³ä¸œç…®", name:"è™¾ä¸¸", nameth:"à¸¥à¸¹à¸à¸Šà¸´à¹‰à¸™à¸à¸¸à¹‰à¸‡", price:10 },
  { type:"å…³ä¸œç…®", name:"å¢¨é±¼ä¸¸", nameth:"à¸¥à¸¹à¸à¸Šà¸´à¹‰à¸™à¸›à¸¥à¸²à¸«à¸¡à¸¶à¸", price:10 },
  { type:"å…³ä¸œç…®", name:"ç”œä¸è¾£", nameth:"à¸ªà¸§à¸µà¸—à¹‚à¸›à¹‰à¸«à¸¥à¹ˆà¸²", price:10 },
  { type:"å…³ä¸œç…®", name:"é­”èŠ‹ç»“", nameth:"à¹‚à¸„à¹€à¸™à¸µà¸¢à¸„à¹Œ", price:10 },
  { type:"å…³ä¸œç…®", name:"é­”èŠ‹ä¸", nameth:"à¹€à¸ªà¹‰à¸™à¹‚à¸„à¹€à¸™à¸µà¸¢à¸„à¹Œ", price:10 },
  { type:"å…³ä¸œç…®", name:"è±†è…æ³¡", nameth:"à¹€à¸•à¹‰à¸²à¸«à¸¹à¹‰à¸—à¸­à¸”", price:10 },
  { type:"å…³ä¸œç…®", name:"æ²¹è±†è…", nameth:"à¹€à¸•à¹‰à¸²à¸«à¸¹à¹‰à¸™à¹‰à¸³à¸¡à¸±à¸™", price:10 },
  { type:"å…³ä¸œç…®", name:"é¦™è‡", nameth:"à¹€à¸«à¹‡à¸”à¸«à¸­à¸¡", price:10 },
  { type:"å…³ä¸œç…®", name:"é‡‘é’ˆè‡", nameth:"à¹€à¸«à¹‡à¸”à¹€à¸‚à¹‡à¸¡à¸—à¸­à¸‡", price:10 },
  { type:"å…³ä¸œç…®", name:"èŸ¹æ£’", nameth:"à¸‚à¸²à¹€à¸™à¸·à¹‰à¸­à¸›à¸¹", price:10 },
  { type:"å…³ä¸œç…®", name:"é±¼ç³•", nameth:"à¹€à¸„à¹‰à¸à¸›à¸¥à¸²", price:10 },
  { type:"å…³ä¸œç…®", name:"ç«¹è½®", nameth:"à¸Šà¸¹à¸£à¸´à¸™", price:10 },
  { type:"å…³ä¸œç…®", name:"å¹´ç³•", nameth:"à¸‚à¹‰à¸²à¸§à¹€à¸«à¸™à¸µà¸¢à¸§à¸›à¸´à¹‰à¸‡", price:10 },
  { type:"å…³ä¸œç…®", name:"é¹Œé¹‘è›‹", nameth:"à¹„à¸‚à¹ˆà¸à¸£à¸°à¸—à¹ˆà¸­à¸¡", price:10 },
  { type:"å…³ä¸œç…®", name:"ç‰›ç­‹", nameth:"à¹€à¸­à¹‡à¸™à¹€à¸™à¸·à¹‰à¸­à¸§à¸±à¸§", price:10 },
  { type:"å…³ä¸œç…®", name:"ç‰›è‚š", nameth:"à¸à¸£à¸°à¹€à¸à¸²à¸°à¸§à¸±à¸§", price:10 },
  { type:"å…³ä¸œç…®", name:"è‚¥è‚ ", nameth:"à¸¥à¸³à¹„à¸ªà¹‰à¸«à¸¡à¸¹", price:10 },
  { type:"å…³ä¸œç…®", name:"é¦™è‚ ", nameth:"à¹„à¸ªà¹‰à¸à¸£à¸­à¸", price:10 },
  { type:"å…³ä¸œç…®", name:"åˆé¤è‚‰", nameth:"à¸¥à¸¸à¸‡à¸Šà¸´à¹‰à¸™", price:10 },
  { type:"å…³ä¸œç…®", name:"åŸ¹æ ¹", nameth:"à¹€à¸šà¸„à¸­à¸™", price:10 },
  { type:"å…³ä¸œç…®", name:"èŠå£«é±¼ä¸¸", nameth:"à¸¥à¸¹à¸à¸Šà¸´à¹‰à¸™à¸›à¸¥à¸²à¸Šà¸µà¸ª", price:10 },
  { type:"å…³ä¸œç…®", name:"èŠå£«å¹´ç³•", nameth:"à¸‚à¹‰à¸²à¸§à¹€à¸«à¸™à¸µà¸¢à¸§à¸Šà¸µà¸ª", price:10 },
  { type:"å…³ä¸œç…®", name:"èŠå£«è±†è…", nameth:"à¹€à¸•à¹‰à¸²à¸«à¸¹à¹‰à¸Šà¸µà¸ª", price:10 },
  { type:"å…³ä¸œç…®", name:"èŠå£«è™¾æ»‘", nameth:"à¸à¸¸à¹‰à¸‡à¸Šà¸µà¸ª", price:10 },

  { type:"è”¬èœ", name:"ç™½èœ", nameth:"à¸à¸°à¸«à¸¥à¹ˆà¸³à¸›à¸¥à¸µ", price:10 },
  { type:"è”¬èœ", name:"å¨ƒå¨ƒèœ", nameth:"à¸à¸°à¸«à¸¥à¹ˆà¸³à¸›à¸¥à¸µà¹€à¸¥à¹‡à¸", price:10 },
  { type:"è”¬èœ", name:"ç”Ÿèœ", nameth:"à¸œà¸±à¸à¸à¸²à¸”à¸«à¸­à¸¡", price:10 },
  { type:"è”¬èœ", name:"æ²¹éº¦èœ", nameth:"à¸œà¸±à¸à¸à¸²à¸”à¸‚à¸²à¸§", price:10 },
  { type:"è”¬èœ", name:"è èœ", nameth:"à¸œà¸±à¸à¹‚à¸‚à¸¡", price:10 },
  { type:"è”¬èœ", name:"èŒ¼è’¿", nameth:"à¸œà¸±à¸à¸Šà¸µà¸¥à¸²à¸§", price:10 },
  { type:"è”¬èœ", name:"è¥¿å…°èŠ±", nameth:"à¸šà¸£à¸­à¸à¹‚à¸„à¸¥à¸µ", price:10 },
  { type:"è”¬èœ", name:"èœèŠ±", nameth:"à¸à¸°à¸«à¸¥à¹ˆà¸³à¸”à¸­à¸", price:10 },
  { type:"è”¬èœ", name:"åœŸè±†", nameth:"à¸¡à¸±à¸™à¸à¸£à¸±à¹ˆà¸‡", price:10 },
  { type:"è”¬èœ", name:"è²è—•", nameth:"à¸£à¸²à¸à¸šà¸±à¸§", price:10 },
  { type:"è”¬èœ", name:"å±±è¯", nameth:"à¸¡à¸±à¸™à¸ªà¸³à¸›à¸°à¸«à¸¥à¸±à¸‡", price:10 },
  { type:"è”¬èœ", name:"èŠ‹å¤´", nameth:"à¸¡à¸±à¸™à¹€à¸—à¸¨", price:10 },
  { type:"è”¬èœ", name:"ç‰ç±³", nameth:"à¸‚à¹‰à¸²à¸§à¹‚à¸à¸”", price:10 },
  { type:"è”¬èœ", name:"å†¬ç“œ", nameth:"à¸Ÿà¸±à¸à¸‚à¸²à¸§", price:10 },
  { type:"è”¬èœ", name:"ç™½èåœ", nameth:"à¸«à¸±à¸§à¹„à¸Šà¹€à¸—à¹‰à¸²", price:10 },
  { type:"è”¬èœ", name:"èƒ¡èåœ", nameth:"à¹à¸„à¸£à¸­à¸—", price:10 },
  { type:"è”¬èœ", name:"é»„ç“œ", nameth:"à¹à¸•à¸‡à¸à¸§à¸²", price:10 },
  { type:"è”¬èœ", name:"èŒ„å­", nameth:"à¸¡à¸°à¹€à¸‚à¸·à¸­à¸¢à¸²à¸§", price:10 },
  { type:"è”¬èœ", name:"é’æ¤’", nameth:"à¸à¸£à¸´à¸à¹€à¸‚à¸µà¸¢à¸§", price:10 },
  { type:"è”¬èœ", name:"é¦™è‡", nameth:"à¹€à¸«à¹‡à¸”à¸«à¸­à¸¡", price:10 },
  { type:"è”¬èœ", name:"é‡‘é’ˆè‡", nameth:"à¹€à¸«à¹‡à¸”à¹€à¸‚à¹‡à¸¡à¸—à¸­à¸‡", price:10 },
  { type:"è”¬èœ", name:"æé²è‡", nameth:"à¹€à¸«à¹‡à¸”à¸­à¸±à¸™à¸ˆà¸´à¸‡", price:10 },
  { type:"è”¬èœ", name:"å¹³è‡", nameth:"à¹€à¸«à¹‡à¸”à¸Ÿà¸²à¸‡", price:10 },
  { type:"è”¬èœ", name:"æœ¨è€³", nameth:"à¹€à¸«à¹‡à¸”à¸«à¸¹à¸«à¸™à¸¹", price:10 },
  { type:"è”¬èœ", name:"æµ·å¸¦", nameth:"à¸ªà¸²à¸«à¸£à¹ˆà¸²à¸¢", price:10 },
  { type:"è”¬èœ", name:"æµ·ç™½èœ", nameth:"à¸ªà¸²à¸«à¸£à¹ˆà¸²à¸¢à¸‚à¸²à¸§", price:10 },

  { type:"é¥®å“", name:"çŸ¿æ³‰æ°´", nameth:"à¸™à¹‰à¸³à¹€à¸›à¸¥à¹ˆà¸²", price:10 },
  { type:"é¥®å“", name:"å¯ä¹", nameth:"à¹‚à¸„à¹‰à¸", price:10 },
  { type:"é¥®å“", name:"é›ªç¢§", nameth:"à¸ªà¹„à¸›à¸£à¸—à¹Œ", price:10 },
  { type:"é¥®å“", name:"èŠ¬è¾¾", nameth:"à¸Ÿà¸±à¸™à¸•à¹‰à¸²", price:10 },
  { type:"é¥®å“", name:"ç¾å¹´è¾¾", nameth:"à¹€à¸¡à¸µà¸¢à¸™à¸”à¸²", price:10 },
  { type:"é¥®å“", name:"å†°çº¢èŒ¶", nameth:"à¸Šà¸²à¹à¸”à¸‡à¹€à¸¢à¹‡à¸™", price:10 },
  { type:"é¥®å“", name:"ç»¿èŒ¶", nameth:"à¸Šà¸²à¹€à¸‚à¸µà¸¢à¸§", price:10 },
  { type:"é¥®å“", name:"ä¹Œé¾™èŒ¶", nameth:"à¸Šà¸²à¸­à¸¹à¹ˆà¸«à¸¥à¸‡", price:10 },
  { type:"é¥®å“", name:"æœæ±", nameth:"à¸™à¹‰à¸³à¸œà¸¥à¹„à¸¡à¹‰", price:10 },
  { type:"é¥®å“", name:"å¥¶èŒ¶", nameth:"à¸Šà¸²à¸™à¸¡", price:10 },
  { type:"é¥®å“", name:"å’–å•¡", nameth:"à¸à¸²à¹à¸Ÿ", price:10 },
  { type:"é¥®å“", name:"è±†æµ†", nameth:"à¸™à¹‰à¸³à¹€à¸•à¹‰à¸²à¸«à¸¹à¹‰", price:10 },
  { type:"é¥®å“", name:"é…¸å¥¶", nameth:"à¹‚à¸¢à¹€à¸à¸´à¸£à¹Œà¸•", price:10 },
  { type:"é¥®å“", name:"å•¤é…’", nameth:"à¹€à¸šà¸µà¸¢à¸£à¹Œ", price:10 },
  { type:"é¥®å“", name:"çº¢é…’", nameth:"à¹„à¸§à¸™à¹Œà¹à¸”à¸‡", price:10 },
  { type:"é¥®å“", name:"ç™½é…’", nameth:"à¹€à¸«à¸¥à¹‰à¸²à¸‚à¸²à¸§", price:10 }
];

let currentType = "å…³ä¸œç…®";
let cart = {};
let soupIdx = -1;
const soupNames = ["æ¸…æ±¤", "ç”œå’¸é…±æ²¹", "éº»è¾£"];
const soupNamesTh = ["à¸‹à¸¸à¸›à¹ƒà¸ª", "à¸‹à¸¸à¸›à¹‚à¸Šà¸¢à¸¸", "à¸¡à¸±à¸ªà¸¥à¸²"];
let lastOrderLength = 0;
let autoRefresh = null;

function generateOrderNo() {
  return "OD" + Math.floor(Math.random()*1000000).toString().padStart(6,'0');
}

function renderList() {
  let html = '';
  foods.filter(f=>f.type===currentType).forEach(f=>{
    const n = cart[f.name]||0;
    html+=`<div class="item"><div class="name"><span data-lang="zh">${f.name}</span><span data-lang="th">${f.nameth}</span></div><div class="price">${f.price}</div><div class="nums"><button class="btn" onclick="change('${f.name}',${f.price},-1)">-</button><span>${n}</span><button class="btn" onclick="change('${f.name}',${f.price},1)">+</button></div></div>`;
  });
  document.getElementById("list").innerHTML = html;
}

function setType(t){currentType=t;document.querySelectorAll(".tab").forEach((e,i)=>e.classList.toggle("active",i===[..."å…³ä¸œç…®","è”¬èœ","é¥®å“"].indexOf(t)));renderList();}
function change(n,p,d){cart[n]=(cart[n]||0)+d;if(cart[n]<0)cart[n]=0;renderList();calcTotal();}
function calcTotal(){let t=0;for(let k in cart)t+=cart[k]*foods.find(x=>x.name===k).price;document.getElementById("total").innerText=t;return t;}
function setSoup(i){soupIdx=i;document.querySelectorAll(".soup-btn").forEach((e,j)=>e.classList.toggle("active",j==i));}
function switchLang(){document.body.classList.toggle("th");}

function toPay(){
  if(soupIdx===-1){alert("à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¸‹à¸¸à¸› / è¯·é€‰æ±¤åº•");return;}
  if(calcTotal()<=0){alert("à¸à¸£à¸¸à¸“à¸²à¹€à¸¥à¸·à¸­à¸à¸§à¸±à¸•à¸–à¸¸à¸”à¸´à¸š / è¯·é€‰èœå“");return;}
  document.getElementById("payMoney").innerText = calcTotal();
  document.getElementById("payLayer").style.display="flex";
}

function closePay(){document.getElementById("payLayer").style.display="none";}

function downloadQR(){
  const a=document.createElement("a");
  a.href="https://promptpay.io/0923969867.png";
  a.download="PromptPay.png";
  a.click();
}

async function confirmOrder(){
  const total = calcTotal();
  if(total<=0||soupIdx===-1)return;
  const orderNo = document.getElementById("orderNo").innerText;
  const address = document.getElementById("customerAddress").value || "æœªå¡«å†™";
  const items = [];
  for(let name in cart){
    if(cart[name]>0){
      const f=foods.find(x=>x.name===name);
      items.push({name:f.name,nameth:f.nameth,qty:cart[name],price:f.price});
    }
  }
  const order = {
    orderNo,address,total,items,
    soup:soupNames[soupIdx]+" / "+soupNamesTh[soupIdx],
    time:new Date().toLocaleString(),
    paid:false
  };
  await saveOrder(order);
  closePay();
  document.getElementById("showOrderNo").innerText=orderNo;
  document.getElementById("successLayer").style.display="flex";
  cart={};soupIdx=-1;document.querySelectorAll(".soup-btn").forEach(e=>e.classList.remove("active"));
  document.getElementById("customerAddress").value="";
  renderList();calcTotal();
  document.getElementById("orderNo").innerText=generateOrderNo();
}

function closeSuccess(){document.getElementById("successLayer").style.display="none";}

function openPwd(){document.getElementById("pwdLayer").style.display="flex";document.getElementById("pwdInput").value="";}
function closePwd(){document.getElementById("pwdLayer").style.display="none";}
function checkPwd(){
  if(document.getElementById("pwdInput").value==="510303"){
    closePwd();
    openAdmin();
  }else{
    alert("å¯†ç é”™è¯¯");
  }
}

function openAdmin(){
  document.getElementById("adminLayer").style.display="block";
  loadOrders();
  if(autoRefresh)clearInterval(autoRefresh);
  autoRefresh=setInterval(loadOrders,5000);
}

function closeAdmin(){
  document.getElementById("adminLayer").style.display="none";
  clearInterval(autoRefresh);
}

async function loadOrders(){
  const res = await fetch(API,{headers:{"X-Access-Key":API_KEY}});
  const data = await res.json();
  const orders = data.record.orders || [];
  const todayTotal = orders.reduce((sum,o)=>sum+o.total,0);
  document.getElementById("todayOrderCount").innerText=orders.length;
  document.getElementById("todayTotal").innerText=todayTotal;
  const list = document.getElementById("historyList");
  list.innerHTML = "";
  orders.forEach((o,i)=>{
    const div=document.createElement("div");
    div.className="history-item";
    div.innerHTML=`
      <p>è®¢å•ï¼š${o.orderNo}</p>
      <p>åœ°å€ï¼š${o.address}</p>
      <p>${o.time} | ${o.total} à¸šà¸²à¸—</p>
      <p>æ±¤åº•ï¼š${o.soup}</p>
      <button class="pay-btn ${o.paid?'pay-paid':'pay-unpaid'}" onclick="togglePay(${i})">
        ${o.paid?'å·²æ”¶æ¬¾':'æœªæ”¶æ¬¾'}
      </button>
    `;
    list.appendChild(div);
  });
  if(orders.length>lastOrderLength){
    document.getElementById("newMsgBadge").style.display="inline-block";
  }
  lastOrderLength=orders.length;
}

async function togglePay(idx){
  const res=await fetch(API,{headers:{"X-Access-Key":API_KEY}});
  const data=await res.json();
  const orders=data.record.orders||[];
  orders[idx].paid=!orders[idx].paid;
  await fetch(API,{
    method:"PUT",
    headers:{"Content-Type":"application/json","X-Access-Key":API_KEY},
    body:JSON.stringify({orders})
  });
  loadOrders();
}

async function saveOrder(order){
  const res=await fetch(API,{headers:{"X-Access-Key":API_KEY}});
  const data=await res.json();
  const orders=data.record.orders||[];
  orders.unshift(order);
  await fetch(API,{
    method:"PUT",
    headers:{"Content-Type":"application/json","X-Access-Key":API_KEY},
    body:JSON.stringify({orders})
  });
}

window.onload=()=>{
  document.getElementById("orderNo").innerText=generateOrderNo();
  renderList();
};
</script>
</body>
</html>
